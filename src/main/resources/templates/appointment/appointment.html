<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
            rel="stylesheet"
            href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    />
    <title>Maps Project</title>
    <style>
        #map {
            height: 800px;
            width: 800px;
            margin: 5rem auto;
        }
        img.huechange {
            filter: hue-rotate(120deg);
        }

    </style>
</head>
<body>
<p>Click the button to get your coordinates.</p>

<button onclick="getLocation()">Try It</button>

<p id="demo"></p>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<script>

    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition);
        } else {
            x.innerHTML = "Geolocation is not supported by this browser.";
        }
        function showPosition(position) {
            var x= position.coords.latitude ;
            var y= position.coords.longitude;
            const apiKey =
                'pk.eyJ1IjoiYWxmcmVkMjAxNiIsImEiOiJja2RoMHkyd2wwdnZjMnJ0MTJwbnVmeng5In0.E4QbAFjiWLY8k3AFhDtErA';



            console.log(x)
            console.log(y)
            const mymap = L.map('map').setView([x, y], 15);

            L.tileLayer(
                'https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}',
                {
                    maxZoom: 18,
                    id: 'mapbox/streets-v11',
                    tileSize: 512,
                    zoomOffset: -1,
                    accessToken: apiKey,
                }
            ).addTo(mymap);

            // Adding Marker

            const marker = L.marker([x, y]).addTo(mymap);
            // Add popup message
            let template = `
<h3>MY LOCATION</h3>
`;
            marker.bindPopup(template);

            // Add circle
            const circle = L.circle([x, y], {
                radius: 50,
                color: 'green',
                fillColor: 'red',
                fillOpacity: 0.2,
            })
                .addTo(mymap)
                .bindPopup('I am a circle');

            var loc = [[${Shops}]];
            console.log(loc)

            let locations = [
                {
                    lat: '31.979056',
                    lon: '35.954154',
                },
                {
                    lat: '31.976681',
                    lon: ' 35.957823',
                },
                {
                    lat: '31.973423',
                    lon: '35.951407',
                },
                { lat: '31.972094', lon: '35.954905' },
            ];
            locations.map((e) => {
                const marker1 = L.marker([e.lat, e.lon]).addTo(mymap);
                marker._icon.classList.add('huechange');
                // Add popup message
                let template = `
    <h3 >Empire State Building</h3>
    <div style="text-align:center">
        <img width="150" height="150"src="image.jpg"/>
    </div>
    `;
                marker1.bindPopup(template);
                const circle = L.circle([e.lat, e.lon], {
                    radius: 20,
                    color: 'green',
                    fillColor: 'red',
                    fillOpacity: 0.2,
                })
                    .addTo(mymap)
                    .bindPopup('I am a circle');
            });
        }
    }


</script>

</body>
</html>
